<!doctype html>
<html>
<head>

  <!--
  
  Lucas Ou-Yang
  http://codelucas.com
  
  "I saw the angel in the marble and carved until I set him free." - Michelangelo

  -->
  
  <title>Fun with primes - Euler Problems 7 & 10 &raquo; codelucas.com</title>
  <meta property="og:title" content="Fun with primes - Euler Problems 7 & 10 &raquo; codelucas.com" />

  <meta name="description" content="Hi! My name is Lucas, i'm passionate about software & art. I build web applications and distance run in my spare time.">
  <meta property="og:description" content="Hi! My name is Lucas, i'm passionate about software & art. I build web applications and distance run in my spare time." />

  <meta property="og:type" content="article" />
  <meta property="article:tag" content="euler" /><meta property="article:tag" content="algorithms" /><meta property="article:tag" content="primes" />
  <meta property="og:image" content="http://codelucas.com/images/logo.png" />

  <meta property="article:author" content="http://codelucas.com/about/" />
  <meta property="fb:admins" content="lucas.ouyang.7" />
  <!-- <meta property="fb:app_id" content="" /> -->
  <link rel="author" href="https://plus.google.com/108352969036344290601" />
  <link rel="icon" type="image/png" href="/favicon.ico">
  <!-- Fonts, 600 is pseudo bold -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>

  
  <link rel="canonical" href="http://codelucas.com/euler-problem-7-and-10-fun-primes/" />
  <meta property="og:url" content="http://codelucas.com/euler-problem-7-and-10-fun-primes/" />
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- <link rel="alternate" type="application/atom+xml" title="codelucas.com" href="" /> -->

  <link rel="stylesheet" href="/css/compiled/style.css" />

  <script type="text/javascript" src="//use.typekit.net/lvb8hht.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

</head>
<body class="post">

  <header id="header">
  <h1><a href="/">codelucas</a></h1>
  </header>
  
  <div id="container">

    <section class="content clearfix">
      <div class="postHeader">

  <h1>
    <a href="/euler-problem-7-and-10-fun-primes/">Fun with primes - Euler Problems 7 & 10</a>
  </h1>

  <div class="byline">
    <span>By <a href="/about/" title="Lucas Ou-Yang">Lucas Ou-Yang</a></span>
    <time datetime="2012-12-20">December 20, 2012</time>
    Tagged with
    <ul class="tags">
      
      <li><a href="/tag/euler/">euler</a></li>
      
      <li><a href="/tag/algorithms/">algorithms</a></li>
      
      <li><a href="/tag/primes/">primes</a></li>
      
    </ul>
  </div>

</div>

<article>

  <p>Hello, I haven&rsquo;t made a blog post in a while now; a lot has happened since the Google interview. All of that will be discussed in the future posts.</p>

<p>Winter break has started, and there are some cool CS &amp; Math problems i&rsquo;d like to talk about: <a href="http://projecteuler.net/problems">The Euler Problems</a>. All problems answered on my site will be done in either Java or Python. The ones which we will talk about today are going to be related to primes.</p>

<p>Problem 10:</p>

<blockquote><p>The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17. Find the sum of all the primes below two million.</p></blockquote>

<p>Upon reading this problem, we can see that there are many &ldquo;bad&rdquo; solutions which however are very easy to implement. These solutions wont actually work due to the huge number requirement of <em>two million</em>. If the question was: &ldquo;find me the sum of all primes up to 100 or 1000&rdquo;, we would be fine. Not for 2 million though. For computing that many numbers, we need a somewhat solid algorithm.</p>

<p>Lets take a look at one of the &ldquo;bad solutions&rdquo; first. We must first define what a prime actually is, it&rsquo;s an integer which is only divisible by 1 and itself and it starts from two and goes up (the positive primes).</p>

<p><strong>High level implementation</strong>: Iterate from 2 all the way to two million, check if each number is a prime or not. If it is, add it to our growing sum.<em>
</em></p>

<p>Well, we know what a prime actually is from above, lets first implement it with the slowest and easiest solution thinkable.</p>

<div class="highlight"><pre><code class="java"><span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">2000000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="c1">// O(n^2)      </span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="c1">// O(n)        </span>
         <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
              <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
</code></pre></div>


<p>Look at the code above, we are going integer by integer, from two all the way to two million.
For each of those integers, we are checking if it&rsquo;s divisible by <i>every</i> number from two all the way up until the number itself! It&rsquo;s a O(n<sup>2</sup>) implementation, ew.</p>

<p>There are some trivial but immediate fixes which we can add, the first is based on the fact that even numbers <em>can&rsquo;t </em>be prime. So we can replace</p>

<div class="highlight"><pre><code class="java"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">2000000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>

<span class="c1">// With...</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">2000000</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="o">)</span>
<span class="c1">// Don&#39;t forget to manually tag 2 on the result</span>
<span class="c1">// because we know it&#39;s prime anyways.</span>
</code></pre></div>


<p>Enough of that though! Lets delve into some of the more interesting implementations:</p>

<p>With some more context about how primes work, we can really speed things up. For example, whether or not 2 is prime, we know that all greater factors of two <em>are not. </em>This rule follows for 3, 4, 5, etc.. So, for each number we test if is prime or not, we can eliminate all future factors so we can tell our for loop to skip these numbers, we already know that they are prime. Here is the implementation: (To avoid confusion, a BitSet is essentially a list of true and false (0, 1) values).</p>

<div class="highlight"><pre><code class="java"><span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="c1">// List of true &amp; false values</span>
<span class="c1">// They are all default false!</span>
<span class="n">BitSet</span> <span class="n">bs</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BitSet</span><span class="o">(</span><span class="mi">2000000</span><span class="o">);</span> 

<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">2000000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>            
     <span class="k">if</span><span class="o">(</span><span class="n">bs</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">))</span> <span class="c1">// If bs is true, skip that number!      </span>
         <span class="k">continue</span><span class="o">;</span>         
     <span class="k">else</span>
         <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
     <span class="c1">// Jump through the factors of the number we are on, </span>
     <span class="c1">// set the #&#39;s to true so we can skip them in the future.</span>
     <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="mi">2000000</span><span class="o">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="n">i</span><span class="o">)</span>                                
         <span class="n">bs</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">j</span><span class="o">);</span>  <span class="c1">// To true          </span>
<span class="o">}</span>
</code></pre></div>


<p>What&rsquo;s very cool about this implementation is that it&rsquo;s O(nlog(n)) time complexity, versus the O(n<sup>2</sup>) above, so it&rsquo;s significantly faster, especially if our n is 2 million. The optimized operation you see above solved Euler problem #10 in 0.27 seconds, the first implementation would have taken <em>many</em> minutes. Also, the answer is 142,913,828,922.</p>

<p>We can apply the above logic for Euler problem number 7, I won&rsquo;t go too in depth for this one.</p>

<p>Problem 7:</p>

<blockquote><p>By listing the first six prime numbers: 2, 3, 5, 7, 11, and 13, we can see that the 6th prime is 13. What is the 10,001st prime number?</p></blockquote>

<p>To solve this, implement the same solution above, but keep a counter that increments every time we encounter a prime number. Once we hit 10,001, record down that prime and we are done!</p>

<p>104,743 is the answer.</p>

<p>Primes are fun, the two problems were cool in the sense that anyone can find a solution, but a better solution takes time to think and plan out.</p>

<p>Also, there are some roadblocks which some of you may encounter. Like, when I first tried these problems, I had <code>int counter = 0;</code> instead of <code>long counter = 0;</code>, which caused a big error because the biggest integer is roughly 2.14 billion, and the summation of the primes to 2 million is actually much higher, and java never produced any run-time warnings, the answer was just an incorrect number :p.</p>

<p>But yeah, hope you all enjoyed this! Be sure to comment or contact me if you have any questions on the implementations above.</p>


<!--

    <p>(If you liked this, you might like <a href="/euler-problem-16-creative-arrays/">
    Euler Problem 16 - Creative Arrays</a>.)</p>
 
-->

</article>

<section class="meta">
  <h3>
    Discussion & Media
    <a class="rss" href="http://feeds.feedburner.com/" title="Subscribe to the codelucas.com Feed">
      <img src="/images/rss.png" alt="RSS Feed Icon" />
    </a>
  </h3>

  <section class="copy">
    <form action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=USERNAME_HERE', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
      <p>
        <a href="https://twitter.com/codelucas" class="avatar">
          <img src="/images/selfie3_small.jpg" height="50" width="50" alt="Lucas Ou-Yang" />
        </a>
        Hey, thanks for reading! I'm <a href="/about/">Lucas Ou-Yang</a>, I love making things. 
        I am currently working on <a href="http://github.com/codelucas/newspaper">Newspaper</a>, 
        an open source python library for article news extraction, and 
        <a href="http://antchatter.com">Antchatter.com</a> a geolocation enhanced chatroom 
        for college kids. 
        
        I am also a co-founder of <a href="http://wintria.com">Wintria.com</a>. 
      </p>

      
      <p>
        If you enjoyed this article, you should follow me on <a href="http://facebook.com/lucas.ouyang.7">Facebook</a> or <a href="https://twitter.com/lucasouyang">Twitter</a><!-- or sign up to get an email whenever I write something new:

        <input type="email" name="email" placeholder="email@email.com"/>
        <input type="hidden" value="codelucas" name="uri"/>
        <input type="hidden" name="loc" value="en_US"/>
        <input type="submit" value="Subscribe" />-->
      </p>
    </form>

    <p>
      Share this article with your friends:
    </p>

    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://codelucas.com/euler-problem-7-and-10-fun-primes/" data-text="Fun with primes - Euler Problems 7 &amp; 10" data-via="lucasouyang" data-size="large" data-related="lucasouyang">Tweet</a>

    <div class="fb-like" data-href="http://codelucas.com/euler-problem-7-and-10-fun-primes/" data-send="false" data-width="320" data-show-faces="true"></div>

  </section>


  
    <a class="prev" href="/euler-problem-16-creative-arrays/" title="Previous Post: Euler Problem 16 - Creative Arrays">Euler Problem 16 - Creative Arrays</a>
  
  
    <a class="next" href="/pass-by-value-pass-by-reference/" title="Next Post: Pass by value & pass by reference">Pass by value & pass by reference</a>
  

  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'codelucas';
      var disqus_developer = (window.location.hostname == 'localhost') ? 1 : 0;
      var disqus_url = 'http://codelucas.com/euler-problem-7-and-10-fun-primes/';

      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

    </section>

    

  </div>
  <center>
      <!--<div class="byline" style="margin-bottom:10px;">"I saw the angel in the marble and carved until I set him free." - Michelangelo</div>-->

      <div class="byline" style="margin-bottom:10px;">The theme is a modified version of <a href="http://feross.org">Feross's blog</a></div>
  </center>

  <script src="/js/libraries.js"></script>
  <script src="/js/script.js"></script>

  

  

  

    <!-- Facebook -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=223190377735910";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <!-- Twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  
  <!-- Google Analytics -->
  <script>
    var _gaq=[['_setAccount','UA-37131973-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>


</body>
</html>
